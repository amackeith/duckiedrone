<?xml version="1.0"?>
<launch>
	<arg name="rangefinder" 
		doc="rangefinder type: lidar or infrared"/>
	<arg name="i2c1" 
		doc="i2c channel that sensor has been remapped to"/>
	  <arg name="i2c2"/>
	  <arg name="i2c3"/>
	  <arg name="i2c4"/>

  <!-- lidar_sensor_pub nodes take in the i2c address for each sensor -->
  <group if="$(eval arg('rangefinder') == 'lidar')">


	  <node pkg="pidrone_pkg" type="lidar_sensor_pub.py" 
		  name="lidar_sensor_pub1" output="screen">
		  <param name="i2cchannel" value="$(arg i2c1)" /></node>

          <node pkg="pidrone_pkg" type="lidar_sensor_pub.py" 
		  name="lidar_sensor_pub2" output="screen">
		  <param name="i2cchannel" value="$(arg i2c2)" /></node>

	  <node pkg="pidrone_pkg" type="lidar_sensor_pub.py" 
		  name="lidar_sensor_pub3" output="screen">
		  <param name="i2cchannel" value="$(arg i2c3)" /></node>

	  <node pkg="pidrone_pkg" type="lidar_sensor_pub.py" 
		  name="lidar_sensor_pub4" output="screen">
		  <param name="i2cchannel" value="$(arg i2c4)" /></node>

	  <node pkg="pidrone_pkg" type="lidar_smoothing.py" 
		  name="lidar_smoothing" output="screen"></node>
  </group>


  <group if="$(eval arg('rangefinder') == 'infrared')">
	  <node pkg="pidrone_pkg" type="infrared_pub.py" 
		  name="infrared_pub" output="screen"></node>
  </group>

  <!-- Launch the rest of the nodes -->
  <node pkg="pidrone_pkg" type="flight_controller_node.py" 
	  name="flight_controller_node" output="screen"></node>

</launch>
